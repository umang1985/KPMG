It makes use of the http://169.254.169.254/latest/meta-data link-local address. Instance metatada is provided at this link, but only when you visit it from a running instance.
A few simple Python scripts are used to extract the required information using the above API.
